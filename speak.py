import math
import sys
from random import random

import requests
from secret_vars import SECRET_VARS

BASE = "QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm"

class Charset:
    def __init__(self, chars: str, char_len: int = 1):
        self.map = {
            BASE[i]: chars[i*char_len:(i+1)*char_len] for i in range(len(BASE))
        }

    def map_char(self, char: str) -> str:
        return self.map.get(char, char)

class TextFormatter:
    VARIANTS = [
        Charset("Qâ‚©É†â±¤â‚®ÉŽÉ„Å‚Ã˜â‚±â‚³â‚´Äâ‚£â‚²â±§Jâ‚­â± â±«Ó¾â‚µVà¸¿â‚¦â‚¥Qâ‚©É†â±¤â‚®ÉŽÉ„Å‚Ã˜â‚±â‚³â‚´Äâ‚£â‚²â±§Jâ‚­â± â±«Ó¾â‚µVà¸¿â‚¦â‚¥"),
        Charset("ð•¼ð’²ð•°â„›ð•¿ð’´ð–€â„ð•ºð’«ð•¬ð’®ð•¯â„±ð•²â„‹ð•µð’¦ð•·ð’µð–ƒð’žð–â„¬ð•¹â„³ð––ð“Œð–Šð“‡ð–™ð“Žð–šð’¾ð–”ð“…ð–†ð“ˆð–‰ð’»ð–Œð’½ð–ð“€ð–‘ð“ð–ð’¸ð–›ð’·ð–“ð“‚"),
        Charset("ð’¬ð’²â„°â„›ð’¯ð’´ð’°â„ð’ªð’«ð’œð’®ð’Ÿâ„±ð’¢â„‹ð’¥ð’¦â„’ð’µð’³ð’žð’±â„¬ð’©â„³ð“†ð“Œâ„¯ð“‡ð“‰ð“Žð“Šð’¾â„´ð“…ð’¶ð“ˆð’¹ð’»â„Šð’½ð’¿ð“€ð“ð“ð“ð’¸ð“‹ð’·ð“ƒð“‚"),
        Charset("ÉŠå±±ã ªå°ºã„’ã„šã„©å·¥ã„–å°¸é—©ä¸‚á—ªåƒáŽ¶å»¾ä¸¿é•¿ã‡„ä¹™ä¹‚â¼•á¯ä¹ƒð“çˆªÉŠå±±ã ªå°ºã„’ã„šã„©å·¥ã„–å°¸é—©ä¸‚á—ªåƒáŽ¶å»¾ä¸¿é•¿ã‡„ä¹™ä¹‚â¼•á¯ä¹ƒð“çˆª"),
        Charset("ðŒ’á”ðŒ„ðŒðŒ•ðŒ™ðŒµðŒ‰êŠðŒ“ðŒ€ðŒ”ðŒƒðŒ…áµð‹…á–ðŒŠðŒ‹â±¿ð‹„ðŒ‚á•“ðŒðŒðŒŒðŒ’á”ðŒ„ðŒðŒ•ðŒ™ðŒµðŒ‰êŠðŒ“ðŒ€ðŒ”ðŒƒðŒ…áµð‹…á–ðŒŠðŒ‹â±¿ð‹„ðŒ‚á•“ðŒðŒðŒŒ"),
        Charset("â“†â“Œâ’ºâ“‡â“‰â“Žâ“Šâ’¾â“„â“…â’¶â“ˆâ’¹â’»â’¼â’½â’¿â“€â“â“â“â’¸â“‹â’·â“ƒâ“‚â“ â“¦â“”â“¡â“£â“¨â“¤â“˜â“žâ“Ÿâ“â“¢â““â“•â“–â“—â“™â“šâ“›â“©â“§â“’â“¥â“‘â“â“œ"),
        Charset("á‹“áˆ á‰¹á‹ªá•áˆƒá±áŒŽá‹á‹¨áˆáŠáŒ‹á‰»áâ¶´á“áŠ¡áˆ¨áŒŠáˆ¸áˆ­áˆ…áªáŠ­áŒ®á‹“áˆ á‰¹á‹ªá•áˆƒá±áŒŽá‹á‹¨áˆáŠáŒ‹á‰»áâ¶´á“áŠ¡áˆ¨áŒŠáˆ¸áˆ­áˆ…áªáŠ­áŒ®"),
        Charset("QÒ‰WÒ‰EÒ‰RÒ‰TÒ‰YÒ‰UÒ‰IÒ‰OÒ‰PÒ‰AÒ‰SÒ‰DÒ‰FÒ‰GÒ‰HÒ‰JÒ‰KÒ‰LÒ‰ZÒ‰XÒ‰CÒ‰VÒ‰BÒ‰NÒ‰MÒ‰qÒ‰wÒ‰eÒ‰rÒ‰tÒ‰yÒ‰uÒ‰iÒ‰oÒ‰pÒ‰aÒ‰sÒ‰dÒ‰fÒ‰gÒ‰hÒ‰jÒ‰kÒ‰lÒ‰zÒ‰xÒ‰cÒ‰vÒ‰bÒ‰nÒ‰mÒ‰", 2),
        Charset("ð«ð—ªð¨ð˜ð©ð­ð—¨ðžðð¦ð™ð—¦ð——ð—™ð—šðœð—ðŸð—Ÿð›ð¬ð—–ð¯ð—ð¥ð®ðž…ðžð´ð²ðžƒðž‡ð»ð—¶ð·ðž€ð°ð˜€ð³ð—³ð—´ðºð—·ð¹ð¸ð˜‡ðž†ðžð¼ð±ð¶ð—º"),
        Charset("â„šð•Žð”¼â„ð•‹ð•ð•Œð•€ð•†â„™ð”¸ð•Šð”»ð”½ð”¾â„ð•ð•‚ð•ƒâ„¤ð•â„‚ð•ð”¹â„•ð•„ð•¢ð•¨ð•–ð•£ð•¥ð•ªð•¦ð•šð• ð•¡ð•’ð•¤ð••ð•—ð•˜ð•™ð•›ð•œð•ð•«ð•©ð•”ð•§ð•“ð•Ÿð•ž"),
        Charset("ðŸ…€ðŸ…†ðŸ„´ðŸ…ðŸ…ƒðŸ…ˆðŸ…„ðŸ„¸ðŸ„¾ðŸ„¿ðŸ„°ðŸ…‚ðŸ„³ðŸ„µðŸ„¶ðŸ„·ðŸ„¹ðŸ„ºðŸ„»ðŸ…‰ðŸ…‡ðŸ„²ðŸ……ðŸ„±ðŸ„½ðŸ„¼ðŸ…€ðŸ…†ðŸ„´ðŸ…ðŸ…ƒðŸ…ˆðŸ…„ðŸ„¸ðŸ„¾ðŸ„¿ðŸ„°ðŸ…‚ðŸ„³ðŸ„µðŸ„¶ðŸ„·ðŸ„¹ðŸ„ºðŸ„»ðŸ…‰ðŸ…‡ðŸ„²ðŸ……ðŸ„±ðŸ„½ðŸ„¼"),
        Charset("ðŸ†€ðŸ††ðŸ…´ðŸ†ðŸ†ƒðŸ†ˆðŸ†„ðŸ…¸ðŸ…¾ðŸ…¿ðŸ…°ðŸ†‚ðŸ…³ðŸ…µðŸ…¶ðŸ…·ðŸ…¹ðŸ…ºðŸ…»ðŸ†‰ðŸ†‡ðŸ…²ðŸ†…ðŸ…±ðŸ…½ðŸ…¼ðŸ†€ðŸ††ðŸ…´ðŸ†ðŸ†ƒðŸ†ˆðŸ†„ðŸ…¸ðŸ…¾ðŸ…¿ðŸ…°ðŸ†‚ðŸ…³ðŸ…µðŸ…¶ðŸ…·ðŸ…¹ðŸ…ºðŸ…»ðŸ†‰ðŸ†‡ðŸ…²ðŸ†…ðŸ…±ðŸ…½ðŸ…¼"),
        Charset("ðð–ð„ð‘ð“ð˜ð”ðˆðŽðð€ð’ðƒð…ð†ð‡ð‰ðŠð‹ð™ð—ð‚ð•ðððŒðªð°ðžð«ð­ð²ð®ð¢ð¨ð©ðšð¬ððŸð ð¡ð£ð¤ð¥ð³ð±ðœð¯ð›ð§ð¦"),
        Charset("ð•¼ð–‚ð•°ð•½ð•¿ð–„ð–€ð•´ð•ºð•»ð•¬ð•¾ð•¯ð•±ð•²ð•³ð•µð•¶ð•·ð–…ð–ƒð•®ð–ð•­ð•¹ð•¸ð––ð–œð–Šð–—ð–™ð–žð–šð–Žð–”ð–•ð–†ð–˜ð–‰ð–‹ð–Œð–ð–ð–ð–‘ð–Ÿð–ð–ˆð–›ð–‡ð–“ð–’"),
        Charset("ðŸ… ðŸ…¦ðŸ…”ðŸ…¡ðŸ…£ðŸ…¨ðŸ…¤ðŸ…˜ðŸ…žðŸ…ŸðŸ…ðŸ…¢ðŸ…“ðŸ…•ðŸ…–ðŸ…—ðŸ…™ðŸ…šðŸ…›ðŸ…©ðŸ…§ðŸ…’ðŸ…¥ðŸ…‘ðŸ…ðŸ…œðŸ… ðŸ…¦ðŸ…”ðŸ…¡ðŸ…£ðŸ…¨ðŸ…¤ðŸ…˜ðŸ…žðŸ…ŸðŸ…ðŸ…¢ðŸ…“ðŸ…•ðŸ…–ðŸ…—ðŸ…™ðŸ…šðŸ…›ðŸ…©ðŸ…§ðŸ…’ðŸ…¥ðŸ…‘ðŸ…ðŸ…œ"),
        Charset("ï¼±ï¼·ï¼¥ï¼²ï¼´ï¼¹ï¼µï¼©ï¼¯ï¼°ï¼¡ï¼³ï¼¤ï¼¦ï¼§ï¼¨ï¼ªï¼«ï¼¬ï¼ºï¼¸ï¼£ï¼¶ï¼¢ï¼®ï¼­ï½‘ï½—ï½…ï½’ï½”ï½™ï½•ï½‰ï½ï½ï½ï½“ï½„ï½†ï½‡ï½ˆï½Šï½‹ï½Œï½šï½˜ï½ƒï½–ï½‚ï½Žï½")
    ]

    @classmethod
    def random_variant(cls) -> Charset:
        return cls.VARIANTS[math.floor(random()*len(TextFormatter.VARIANTS))]

    @classmethod
    def format(cls, text: str) -> str:
        return "".join([
            cls.random_variant().map_char(c)
            for c in text
        ])
    

# Check if a message was provided
if len(sys.argv) < 2:
    print("Usage: python speak.py \"Your message here\"")
    sys.exit(1)

# Replace with your Discord webhook URL
response = requests.post(SECRET_VARS['heart'], json={
    "content": TextFormatter.format(" ".join(sys.argv[1:]))
})

# Check if the message was sent successfully
if response.status_code == 204:
    print("Message sent successfully!")
else:
    print(f"Failed to send message. Status code: {response.status_code}")
